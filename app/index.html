<!-- written by: Ryan Johnson, Art Kalb, Maxwell Yun -->
<!DOCTYPE HTML>
<html>
<head>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="rainbow.js" ></script>
<script type="text/javascript">
 
  var scs = {
    Shooter: {
        data: [
		], 
		title: "Shooter",
		color: "Red",
		div: "chartContainerc",
		tab: "tab3",
		assocvar: Shooter
	},
	Intake: {
		data: [
		], 
		title: "Intake",
		color: "Blue",
		div: "chartContainerb",
		tab: "tab2",
		assocvar: Intake
	},
	Drivebase: {
		data: [
		], 
		title: "Drivebase",
		color: "Green",
		div: "chartContainera",
		tab: "tab1",
		assocvar: Drivebase
	},
	Arm: {
		data: [
		], 
		title: "Arm",
		color: "Dark",
		div: "chartContainerab",
		tab: "tab1",
		assocvar: Arm
	}
};
	function findTabSubset(tabName){
		var subset = [];
		for(v in scs){
			if(scs[v].tab == tabName)
				subset.push(v);
		}
		return subset;
	}
   $(document).ready(function(e) {
	   /*var which = "Drivebase"
	   scs[which].data.push({y: 25});
	   alert(scs[which].data[2].y);*/
    CanvasJS.addColorSet("Blue",
                [//colorSet Array
                "#0070FF",             
                ]);
	CanvasJS.addColorSet("Green",
                [//colorSet Array
                "#00AA00",             
                ]);
	CanvasJS.addColorSet("Red",
                [//colorSet Array
                "#FF0000",             
                ]);
	CanvasJS.addColorSet("Dark",
                [//colorSet Array
                "#222222",             
                ]);
	CanvasJS.addColorSet("Light",
                [//colorSet Array
                "#DDDDDD",             
                ]);
	genall();
	});
  	  
	  function addrand(handler){
		  add(srand(), handler);
		  generate(handler);
	  }
	  function srand(){
		 return Math.random() * 100; 
	  }
	  function add(value, handler){
		  var data = parseInt(value.Drivebase[0].y);
		  scs[handler].data.push(
		  {y: data}
		  );
	  }
	  //use parsejson before add.
	  function graphlist(){
		var subset = [];
		for(v in scs){
				subset.push(v);
		}
		return subset;
	  }
	  function parsejson(array){
		var keyssent = [];
		for(v in array){
			keyssent.push(v);
		}
		for (handle in scs){
			for (i = 0; i < array[handle].length; i++){
				if (scs[handle].data.length < array[handle].length){
					for (a = 0; a < array[handle].length - scs[handle].data.length; i++){
						scs[handle].data.push([]);
					}
				} else {
					scs[handle].data[i].push(array[handle][i])
				}
			}
		}
	  }
	  function randoms(handler){
		  getdata(handler);
		  generate(handler);
	  }
	  function getdata(handler){
		  $.getJSON('json.php',function(datajson) {
			  parsejson(datajson);
			  generate(handler);
			  
		  });
	  }
	  function ggd(handler){
		//generate graph data
			var indata = []
			for (i = 0; i < scs[handler].data.length; i++){
				indata.push({type: "line", dataPoints: scs[handler].data[i]})
			}
			return indata;
	  }
      function generate (handler) {
          scs[handler].assocvar = new CanvasJS.Chart(scs[handler].div, {
              theme: "theme1",//theme1
              
			  colorSet: scs[handler].color,
			  
			  title:{
                  text: scs[handler].title              
              },
              data: ggd(handler)             
              /*{
                  type: "line",
                  dataPoints: scs[handler].data[0]
				  
              },
			  {
                  type: "line",
                  dataPoints: scs[handler].data[1]
				  
              },*/
          });
          scs[handler].assocvar.render();
      }
	   var Drivebase;
	   var Intake;
	   var Shooter;
	   var Arm;
	   function genall(){
			var tabs = findTabSubset(currentTab);
			var i = 0
			while (i < tabs.length){
			
				console.log(tabs[i]);
				console.log(tabs.length);
			
				generate(tabs[i]);
				console.log("asd");
				i = i + 1;
			}
			
		   /*generate("Intake");
		   generate("Drivebase");
		   generate("Shooter");
		   generate("Arm");
		   */
	   }
	   function getall(){
		   $.getJSON('json.php',function(datajson) {
			  parsejson(datajson);
			  genall();
		  });
	   }
	  setInterval(function(){
		  getall();
		  }, 1000);
  </script>
  <!--<script type="text/javascript" src="http://canvasjs.com/assets/script/canvasjs.min.js"></script>-->
  <script type="text/javascript" src="canvasjs-1/canvasjs.min.js"></script>
<link href="css.css" rel="stylesheet" type="text/css">
</head>
<body>
<nav>
Teh Chezy Pofs Deta Lawgr
</nav>
<div class="content">
<div id="usual1" class="usual" style="border:none"> 
  <div class="ulcontain">
  <ul> 
    <li><a name="tab1" href="#tab1" class="selected">Drivebase</a></li> 
    <li><a name="tab2" href="#tab2">Intake</a></li> 
    <li><a name="tab3" href="#tab3">Shooter</a></li> 
  </ul> 
  </div>
  <div class="usual" id="tab1">
      <div id="chartContainera" style="height: 300px; width: 100%;"></div><br>
      <div id="chartContainerab" style="height: 300px; width: 100%;"></div>
  </div> 
  <div class="usual" id="tab2"><div id="chartContainerb" style="height: 300px; width: 100%;"></div></div> 
  <div class="usual" id="tab3"><div id="chartContainerc" style="height: 300px; width: 100%;"></div></div> 
</div> 
</div>
<script src="tabbed.js"></script>
<script type="text/javascript"> 

  $("#usual1 ul").idTabs(); 
</script>
<script>
	var currentTab = "tab1";
  /*$('h1').rainbow({ 
    colors: [
        '#FF0000',
        '#f26522',
        '#fff200',
        '#00a651',
        '#28abe2',
        '#2e3192',
        '#6868ff'
    ],
    animate: true,
    animateInterval: 100,
    pad: false,
    pauseLength: 100,
});*/
	$( ".usual a" ).bind( "click", function() {
		var subset = findTabSubset($(this).attr("name"));
	  	for(var v in subset){
			generate(subset[v]);
		}
		currentTab = $(this).attr("name");
	});
  </script>
  <div id="extra"></div>
</body>
</html>